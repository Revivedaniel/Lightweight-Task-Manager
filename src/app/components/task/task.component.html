<mat-card class="taskCard" appearance="outlined">
  <mat-card-header class="custom-card-header">
    <div class="header-content">
      <mat-card-title>{{task.title}}</mat-card-title>
      <mat-card-subtitle>{{ task.status === 'completed' ? 'Completed' : task.dueDate | date: 'shortDate'}}</mat-card-subtitle>
    </div>
  </mat-card-header>
  <mat-card-content class="content">
  </mat-card-content>
  <mat-accordion>
    <mat-expansion-panel (opened)="panelOpenState.set(true)" (closed)="panelOpenState.set(false)">
      <mat-expansion-panel-header *ngIf="!panelOpenState()" class="taskExpansionHeader">
        <mat-panel-title class="taskShortDescription">{{task.description.length > 0 ? task.description.substring(0, 50) + '...' : ''}}</mat-panel-title>
      </mat-expansion-panel-header>
      <p class="taskDescription">{{task.description}}</p>
      <mat-action-row class="actionRow">
        <mat-expansion-panel-header>
          <button mat-icon-button (click)="editTask(task.id)">
            <mat-icon>edit</mat-icon>
          </button>
          <button mat-icon-button (click)="deleteTask(task.id)">
            <mat-icon>delete</mat-icon>
          </button>
          <button mat-icon-button (click)="cancelTask(task.id)" *ngIf="task.status === 'active'">
            <mat-icon>cancel</mat-icon>
          </button>
          <button mat-icon-button (click)="openDialog()" *ngIf="task.status !== 'active'">
            <mat-icon>play_circle</mat-icon>
          </button>
          <button mat-icon-button (click)="markTaskAsComplete(task.id)" *ngIf="task.status !== 'completed'">
            <mat-icon>check_circle</mat-icon>
          </button>
        </mat-expansion-panel-header>
      </mat-action-row>
    </mat-expansion-panel>
  </mat-accordion>
</mat-card>